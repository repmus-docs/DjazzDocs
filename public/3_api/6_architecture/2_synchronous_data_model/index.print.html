<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.129.0">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="description" content="Because Djazz is beat-based, most objects are built to receive and process information at recurring instances.">
    <meta name="author" content="Daniel Brown">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://localhost:1313/images/hero.png">
    <meta name="twitter:title" content="Synchronous Data in the Model :: Djazz">
    <meta name="twitter:description" content="Because Djazz is beat-based, most objects are built to receive and process information at recurring instances.">
    <meta property="og:url" content="http://localhost:1313/3_api/6_architecture/2_synchronous_data_model.html">
    <meta property="og:site_name" content="Djazz">
    <meta property="og:title" content="Synchronous Data in the Model :: Djazz">
    <meta property="og:description" content="Because Djazz is beat-based, most objects are built to receive and process information at recurring instances.">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="http://localhost:1313/images/hero.png">
    <meta itemprop="name" content="Synchronous Data in the Model :: Djazz">
    <meta itemprop="description" content="Because Djazz is beat-based, most objects are built to receive and process information at recurring instances.">
    <meta itemprop="wordCount" content="492">
    <meta itemprop="image" content="http://localhost:1313/images/hero.png">
    <title>Synchronous Data in the Model :: Djazz</title>
    <link href="http://localhost:1313/3_api/6_architecture/2_synchronous_data_model.html" rel="canonical" type="text/html" title="Synchronous Data in the Model :: Djazz">
    <link href="../../../3_api/6_architecture/2_synchronous_data_model/index.xml" rel="alternate" type="application/rss+xml" title="Synchronous Data in the Model :: Djazz">
    <link href="../../../css/fontawesome-all.min.css?1736171726" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1736171726" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1736171726" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1736171726" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1736171726" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1736171726" rel="stylesheet">
    <link href="../../../css/fonts.css?1736171726" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1736171726" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1736171726" rel="stylesheet">
    <link href="../../../css/theme-relearn-auto.css?1736171726" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/chroma-relearn-auto.css?1736171726" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../css/variant.css?1736171726" rel="stylesheet">
    <link href="../../../css/print.css?1736171726" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1736171726" rel="stylesheet">
    <script src="../../../js/variant.js?1736171726"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.index_js_url="../../../index.search.js?1736171726";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    <style>
      #R-body img.bg-white {
        background-color: white;
      }
    </style>
  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../3_api/6_architecture/2_synchronous_data_model.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../3_api.html"><span itemprop="name">API</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../3_api/6_architecture.html"><span itemprop="name">System Architecture</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Synchronous Data in the Model</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../3_api/6_architecture/2_asynchronous_data_mvcvc.html" title="Asynchronous Data and the MVCVC Design (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../../3_api/7_adding_to_djazz.html" title="Adding to Djazz (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="synchronous-data-in-the-model">Synchronous Data in the Model</h1>

<p>Because Djazz is beat-based, most objects are built to receive and process information at recurring instances.  Djazz is played by inputting a tap, either manually, or from a built-in metronome, or from another application. The tap triggers a beat, which triggers notes to be output from the factor oracle or the score, which triggers note data to be output from antescofo, which triggers sound to be output by the audio or midi outputs.</p>
<p>Upon receiving a tap, Djazz plays music by selecting sections from scores in one of two ways: playing it back &ldquo;straight,&rdquo; or by calculating an improvisation using the factor oracle algorithm.  This results in a reshuffling of the beats, which lines up with the harmonic content of the song.  The factor oracle algorithm can be modified with pattern-matching methods. The input to the factor oracle come from scores and real-time input, either audio or MIDI, and is output as audio or MIDI. It uses Antescofo to generate notes both from scores and generated as improvisations in tempo.</p>
<h6 id="top-level">TOP LEVEL</h6>

<pre class="mermaid align-left zoomable">
graph TB;
    A[Master Clock] 
	B[Audio]
	C[MIDI]
	A--&gt;|tempo, beat number, label| B
	A--&gt;|tempo, beat number, label| C
</pre>
<p>In a nutshell, Djazz is made up of the following:</p>
<ul>
<li>several players which function independently.</li>
<li>master control for synchronising timing and for broadcasting global commands.</li>
</ul>
<p>The master control sends out the following data synchronously to all the players:</p>
<ol>
<li>tempo,</li>
<li>beat,</li>
<li>beat label.</li>
</ol>
<p>It sends this data immediately in succession and in this order to midi and audio generators. This order is important, so that the generators can calculate the correct information to play at the beginning of each beat.  It determinmes this data in the following ways:</p>
<ul>
<li>It contains a <em>beat clock</em> abstraction which acts as a master clock; it outputs a beat number when it receives a bang.  It increments its beat number with each output, but also keeps track of position in a song form and adjusts the beat in accordance if looped.</li>
<li>It keeps track of tempo if tempo is manually input and fluctuates. This uses antescofo.</li>
<li>It reads from the song dict to get label.</li>
</ul>
<h5 id="generators">GENERATORS</h5>
<p>The abstractions that do most of the work in Djazz are the <em>generators</em>.  They accept the data passed by the master control and convert them into appropriate musical output.  There are two types of generators: MIDI and audio.  Their construction is very similar; the difference is a result of the way audio data is played differently from MIDI data.</p>
<h5 id="midi-generators">MIDI GENERATORS</h5>

<pre class="mermaid align-left zoomable">
flowchart TB;
gIn(( ))
g1[Generator 1]
g2[Generator 2]
g3[Generator 3]
g4[Generator 4]
g5[Generator 5]

mbPlayer[MIDI Beat Player]

t1[MIDI\nTrack 1]
t2[MIDI\nTrack 2]
t3[MIDI\nTrack 3]
t4[MIDI\nTrack 4]
t5[MIDI\nTrack 5]

gOut((( )))

gIn --&gt; g1 --&gt; mbPlayer
gIn --&gt; g2 --&gt; mbPlayer
gIn --&gt; g3 --&gt; mbPlayer
gIn --&gt; g4 --&gt; mbPlayer
gIn --&gt; g5 --&gt; mbPlayer

mbPlayer --&gt; t1 --&gt; gOut
mbPlayer --&gt; t2 --&gt; gOut
mbPlayer --&gt; t3 --&gt; gOut
mbPlayer --&gt; t4 --&gt; gOut
mbPlayer --&gt; t5 --&gt; gOut

</pre>
<h5 id="audio-generators">AUDIO GENERATORS</h5>
<p>To write</p>

            <footer class="footline">
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1736171726" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1736171726" defer></script>
    <script src="../../../js/d3/d3-color.min.js?1736171726" defer></script>
    <script src="../../../js/d3/d3-dispatch.min.js?1736171726" defer></script>
    <script src="../../../js/d3/d3-drag.min.js?1736171726" defer></script>
    <script src="../../../js/d3/d3-ease.min.js?1736171726" defer></script>
    <script src="../../../js/d3/d3-interpolate.min.js?1736171726" defer></script>
    <script src="../../../js/d3/d3-selection.min.js?1736171726" defer></script>
    <script src="../../../js/d3/d3-timer.min.js?1736171726" defer></script>
    <script src="../../../js/d3/d3-transition.min.js?1736171726" defer></script>
    <script src="../../../js/d3/d3-zoom.min.js?1736171726" defer></script>
    <script src="../../../js/js-yaml.min.js?1736171726" defer></script>
    <script src="../../../js/mermaid.min.js?1736171726" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"securityLevel\": \"loose\" }");
    </script>
    <script src="../../../js/theme.js?1736171726" defer></script>
  </body>
</html>
